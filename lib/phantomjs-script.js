var page = require('webpage').create();
var url = '/tmp/cmdize-tmp.html';
var globals = "ArrayBuffer,Attr,BeforeLoadEvent,Blob,CDATASection,CSSCharsetRule,CSSFontFaceRule,CSSImportRule,CSSMediaRule,CSSPageRule,CSSPrimitiveValue,CSSRule,CSSRuleList,CSSStyleDeclaration,CSSStyleRule,CSSStyleSheet,CSSValue,CSSValueList,CanvasGradient,CanvasPattern,CanvasRenderingContext2D,CharacterData,ClientRect,ClientRectList,Clipboard,Comment,Counter,DOMException,DOMImplementation,DOMParser,DOMSettableTokenList,DOMStringList,DOMStringMap,DOMTokenList,DataView,Document,DocumentFragment,DocumentType,Element,Entity,EntityReference,Event,EventException,EventSource,File,FileError,FileList,FileReader,Float32Array,FormData,HTMLAllCollection,HTMLAnchorElement,HTMLAppletElement,HTMLAreaElement,HTMLBRElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBlockquoteElement,HTMLBodyElement,HTMLButtonElement,HTMLCanvasElement,HTMLCollection,HTMLDListElement,HTMLDirectoryElement,HTMLDivElement,HTMLDocument,HTMLElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHRElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLIsIndexElement,HTMLKeygenElement,HTMLLIElement,HTMLLabelElement,HTMLLegendElement,HTMLLinkElement,HTMLMapElement,HTMLMarqueeElement,HTMLMenuElement,HTMLMetaElement,HTMLMeterElement,HTMLModElement,HTMLOListElement,HTMLObjectElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLProgressElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLStyleElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableColElement,HTMLTableElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTitleElement,HTMLUListElement,HashChangeEvent,Image,ImageData,Int16Array,Int32Array,Int8Array,KeyboardEvent,MediaList,MessageChannel,MessageEvent,MessagePort,MimeType,MimeTypeArray,MouseEvent,MutationEvent,NamedNodeMap,Node,NodeFilter,NodeList,Notation,Option,OverflowEvent,PageTransitionEvent,Plugin,PluginArray,ProcessingInstruction,ProgressEvent,RGBColor,Range,RangeException,Rect,SQLException,SVGAElement,SVGAltGlyphElement,SVGAngle,SVGAnimateColorElement,SVGAnimateElement,SVGAnimateTransformElement,SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,SVGCircleElement,SVGClipPathElement,SVGColor,SVGComponentTransferFunctionElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGDocument,SVGElement,SVGElementInstance,SVGElementInstanceList,SVGEllipseElement,SVGException,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEDropShadowElement,SVGFEFloodElement,SVGFEFuncAElement,SVGFEFuncBElement,SVGFEFuncGElement,SVGFEFuncRElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGFilterElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGradientElement,SVGHKernElement,SVGImageElement,SVGLength,SVGLengthList,SVGLineElement,SVGLinearGradientElement,SVGMarkerElement,SVGMaskElement,SVGMatrix,SVGMetadataElement,SVGMissingGlyphElement,SVGNumber,SVGNumberList,SVGPaint,SVGPathElement,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegList,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,SVGPatternElement,SVGPoint,SVGPointList,SVGPolygonElement,SVGPolylineElement,SVGPreserveAspectRatio,SVGRadialGradientElement,SVGRect,SVGRectElement,SVGRenderingIntent,SVGSVGElement,SVGScriptElement,SVGSetElement,SVGStopElement,SVGStringList,SVGStyleElement,SVGSwitchElement,SVGSymbolElement,SVGTRefElement,SVGTSpanElement,SVGTextContentElement,SVGTextElement,SVGTextPathElement,SVGTextPositioningElement,SVGTitleElement,SVGTransform,SVGTransformList,SVGUnitTypes,SVGUseElement,SVGVKernElement,SVGViewElement,SVGZoomEvent,SharedWorker,Storage,StorageEvent,StyleSheet,StyleSheetList,Text,TextEvent,TextMetrics,TouchEvent,UIEvent,Uint16Array,Uint32Array,Uint8Array,WebKitAnimationEvent,WebKitBlobBuilder,WebKitCSSKeyframeRule,WebKitCSSKeyframesRule,WebKitCSSMatrix,WebKitCSSTransformValue,WebKitPoint,WebKitTransitionEvent,WebSocket,WheelEvent,Worker,XMLDocument,XMLHttpRequest,XMLHttpRequestException,XMLHttpRequestUpload,XMLSerializer,XPathEvaluator,XPathException,XPathResult,_phantom,applicationCache,callPhantom,clientInformation,closed,console,crypto,defaultStatus,defaultstatus,devicePixelRatio,document,frames,history,innerHeight,innerWidth,length,localStorage,location,locationbar,menubar,name,navigator,offscreenBuffering,onabort,onbeforeunload,onblur,oncanplay,oncanplaythrough,onchange,onclick,oncontextmenu,ondblclick,ondrag,ondragend,ondragenter,ondragleave,ondragover,ondragstart,ondrop,ondurationchange,onemptied,onended,onerror,onfocus,onhashchange,oninput,oninvalid,onkeydown,onkeypress,onkeyup,onload,onloadeddata,onloadedmetadata,onloadstart,onmessage,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmousewheel,onoffline,ononline,onpagehide,onpageshow,onpause,onplay,onplaying,onpopstate,onprogress,onratechange,onreset,onresize,onscroll,onsearch,onseeked,onseeking,onselect,onstalled,onstorage,onsubmit,onsuspend,ontimeupdate,ontouchcancel,ontouchend,ontouchmove,ontouchstart,onunload,onvolumechange,onwaiting,onwebkitanimationend,onwebkitanimationiteration,onwebkitanimationstart,onwebkittransitionend,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,personalbar,screen,screenLeft,screenTop,screenX,screenY,scrollX,scrollY,scrollbars,self,sessionStorage,status,statusbar,styleMedia,toolbar,top,webkitNotifications,webkitURL,window".split(',');

page.open(url, function (status) {

  var window = page.evaluate(function() {
    return window;
  });

  var keys = Object.keys(window);
  var result = [];

  keys.forEach(function(key) {
    if (globals.indexOf(key) < 0) {
      result.push(key);
    }
  });

  console.log(result);
  phantom.exit();

});
